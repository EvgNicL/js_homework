<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>hw4</title>
  </head>
  <body>
    <script>

          // ""Получение данных о пользователе""

          // Реализуйте функцию getUserData, которая принимает идентификатор пользователя (ID) в качестве аргумента и использует fetch для получения данных о пользователе с заданным ID с удаленного сервера. Функция должна возвращать промис, который разрешается с данными о пользователе в виде объекта. Если пользователь с указанным ID не найден, промис должен быть отклонен с соответствующим сообщением об ошибке.

          // Подсказка, с последовательностью действий:
          // getUserData использует fetch для получения данных о пользователе с удаленного сервера. Если запрос успешен (с кодом 200), функция извлекает данные из ответа с помощью response.json() и возвращает объект с данными о пользователе. Если запрос неуспешен, функция отклоняет промис с сообщением об ошибке.





          const getUserData = async (userId) => {
            const response = await fetch(`https://jsonplaceholder.typicode.com/users/${userId}`);
              if (!response.ok) {
                throw new Error('Ошибка получения данных с сервера.');
                }
              return response.json();
          }

          getUserData(2).then((userData) => {
            console.log(userData);
          }).catch((error) => {
            console.log('Пользователь с таким ID не найден.');
          })

        //   ""Отправка данных на сервер""

        //   Реализуйте функцию saveUserData, которая принимает объект с данными о пользователе в качестве аргумента и использует fetch для отправки этих данных на удаленный сервер для сохранения. Функция должна возвращать промис, который разрешается, если данные успешно отправлены, или отклоняется в случае ошибки.
        
        // saveUserData использует fetch для отправки данных о пользователе на удаленный сервер для сохранения. Она отправляет POST-запрос на URL-адрес /users с указанием типа содержимого application/json и сериализует объект с данными о пользователе в JSON-строку с помощью JSON.stringify(). Если запрос успешен (с кодом 200), функция разрешает промис. Если запрос неуспешен, функция отклоняет промис с сообщением

          const user = {
          name: 'John Smith',
          age: 30,
          email: 'john@example.com'
          };
          
          //!!!!!!!!!!!!!!!!!!!!====!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!

//Евгения, здравствуйте :)
//1. Все правильно сделали, отступ слева только нужно поправить в 23 строке.
//2. Тоже нужно отступы поправить в коде.
//Советую не смешивать async/await подход и then, лучше выбрать что-то одно (выбирайте async/await).
//Запрос правильно сделали.
//3. Тут тоже все верно у вас.
//Отличная работа, спасибо, надеюсь, еще пересечемся где-нибудь, Евгения :)

          async function saveUserData(userData) {
            return fetch('https://jsonplaceholder.typicode.com/users', {
            method: 'POST', 
            body: JSON.stringify(userData),
            headers: {
                'Content-type': 'application/json; charset=UTF-8',
            },
            })
            .then((response) => response.json())
            .then((data) => {
                console.log(data);
            })
          }

          saveUserData(user)
          .then(() => {
          console.log('Данные о пользователе успешно сохранены.');
          })
          .catch(error => {
          console.log(error.message);
          });





          // ""Изменение стиля элемента через заданное время""

        //   Напишите функцию changeStyleDelayed, которая принимает идентификатор элемента и время задержки (в миллисекундах) в качестве аргументов. Функция должна изменить стиль элемента через указанное время.
          const divEl = document.createElement('div');
          divEl.setAttribute('id', 'myEl');
          divEl.style.width = '100px';
          divEl.style.height = '100px';
          divEl.style.backgroundColor = 'grey';

          document.body.insertAdjacentElement("beforeend",divEl);

          function changeStyleDelayed (id, mlsec) {
            setTimeout(() => {
                const el = document.getElementById(id);
                if (el) el.style.backgroundColor = 'blue';
            }, mlsec)
          }


          changeStyleDelayed('myEl', 3000); 
    </script>
  </body>
</html>
